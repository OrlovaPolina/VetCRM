$(document).ready(function(){if($(".alert")&&setTimeout(()=>{$(".alert").animate({top:"-100%",opacity:"0"},1500,"linear",function(){$(this).remove()})},2e3),$("#current-schedule li").length>0){let s=$("#current-schedule li"),d=[];s.each(function(){let t=$(this).data("start"),i=$(this).data("end"),r=$(this).text(),u="/doctor/event/now?id="+$(this).data("url");d.push({title:r,start:t,end:i,url:u})});var m=document.getElementById("calendar-curent-schedule"),c=new FullCalendar.Calendar(m,{locale:"ru",contentHeight:"auto",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},initialDate:new Date,eventClassNames:"time-td",navLinks:!0,selectable:!0,selectMirror:!0,select:function(t){title&&c.addEvent({title:t.title,start:t.start,end:t.end}),c.unselect()},editable:!1,dayMaxEventRows:6,events:d});c.render()}$("#doctors-select").change(function(){let s=$('input[name="_token"]').val(),d=$(this).val(),t=[];$.ajax({url:"/doctor/event/new/doctor",method:"POST",cache:!1,data:{_token:s,doctor:d},success:function(i){console.log(i);var r=Object.keys(i.doctor).map(n=>[n,i.doctor[n]]);$.each(r,function(n,e){let l=Object.keys(e).map(o=>[o,e[o]]),a=[];$.each(e[1],function(o,v){let h=$.map(e[1][o],function(p,f){return[[f,p]]});a.push({start:h[0][1],end:h[1][1]})}),t[l[0][1]]=a});let u='<option value="" disabled selected hidden >Выберите Дату</option>';$('select[name="reAdmission[doctors_date]"]').empty().append(u),$.each(Reflect.ownKeys(t),function(n,e){if(e!=="length"){console.log(n);let l='<option value="'+e+'">'+e+"</option>";$('select[name="reAdmission[doctors_date]"]').append(l)}}),$('select[name="reAdmission[doctors_date]"]').change(function(){let n='<option value="" disabled selected hidden >Выберите Время</option>';$('select[name="reAdmission[doctors_time]"]').empty().append(n);let e=t[$(this).val()];$.each(e,function(l,a){let o='<option value="'+a.start+'">'+a.start+" - "+a.end+"</option>";console.log(o),$('select[name="reAdmission[doctors_time]"]').append(o)})})}})})});
